<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Magical Mystery Theater</title>
  </head>
  <body>
    <h1>Magical Mystery Theater</h1>
    <button type="button" onclick="buyTicket()">Purchase Ticket</button>
    <script>
      const GENERAL_ADMISSION_TICKET_COST = 20;
      const CHILD_AND_SENIOR_TICKET_COST = 10;
      const MATINEE_DISCOUNT = 3;

      function buyTicket() {
        const age = prompt("What is your age?");
        let cost = getBaseTicketCost(age);
        cost = applyMartDiscount(cost);

        alert("Your ticket will cost: $" + cost);
      }

      function getBaseTicketCost(age) {
        if (age <= 12 || age >= 65) {
          return CHILD_AND_SENIOR_TICKET_COST;
        }
        return GENERAL_ADMISSION_TICKET_COST;
      }

      function applyMartDiscount(c) {
        const isMatinee = prompt("Are you attending a matinee show?");
        let mat = isMatinee.toLowerCase();
        if (mat === "yes" || mat === "y") {
          c -= MATINEE_DISCOUNT;
        }
        return c;
      }
    </script>
  </body>
</html>
